{% extends 'Base.html' %} 
{% load static %}

<!--block to add title of the page-->
{% block title %}Contact{% endblock title %}

<!--Block to add stylesheet link-->
{% block stylesheet_link %}
  <link rel="stylesheet" href="{% static '/storeTemplate/css/animate.css'%}" />
  <link rel="stylesheet" href="{% static 'storeTemplate/css/owl.carousel.min.css'%}" />
  <link rel="stylesheet" href="{% static 'storeTemplate/css/owl.theme.default.min.css'%}" />
  <link rel="stylesheet" href="{% static 'storeTemplate/css/magnific-popup.css' %}" />
  <link rel="stylesheet" href="{% static 'storeTemplate/css/flaticon.css' %}" />
  <link rel="stylesheet" href="{% static 'storeTemplate/css/style.css' %}" />
{% endblock stylesheet_link %}

<!--Block to add the content of the body-->
{% block body %}

<!--Heading section-->
<section class="hero-wrap hero-wrap-2" style="background-image: url({% static 'storeTemplate/images/conatct_us_background_image.jpg' %})" data-stellar-background-ratio="0.5">
  <div class="overlay"></div>
  <div class="container">
    <div class="row no-gutters slider-text align-items-end justify-content-center">
      <div class="col-md-9 ftco-animate mb-5 text-center container">
        <h2 class="mb-0 bread">Contact Us</h2>
      </div>
    </div>
  </div>
</section>

<section class="ftco-section bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-12">
        <div class="wrapper px-md-4">

          <!--Organization Details-->
          <div class="row mb-5">
            <div class="col-md-3">
              <div class="dbox w-100 text-center">
                <div class="icon d-flex align-items-center justify-content-center">
                  <span class="fa fa-map-marker"></span>
                </div>
                <div class="text">
                  <p><span>Address:</span> 198 West 21th Street, Suite 721 New York NY 10016</p>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="dbox w-100 text-center">
                <div class="icon d-flex align-items-center justify-content-center">
                  <span class="fa fa-phone"></span>
                </div>
                <div class="text">
                  <p>
                    <span>Phone:</span>
                    <a href="tel://1234567920">+91 9865327410</a>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="dbox w-100 text-center">
                <div class="icon d-flex align-items-center justify-content-center">
                  <span class="fa fa-paper-plane"></span>
                </div>
                <div class="text">
                  <p>
                    <span>Email:</span>
                    <a href="mailto:info@yoursite.com">bookapp@gmail.com</a>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="dbox w-100 text-center">
                <div class="icon d-flex align-items-center justify-content-center">
                  <span class="fa fa-globe"></span>
                </div>
                <div class="text">
                  <p><span>Website</span> <a href="#">www.bookapp.com</a></p>
                </div>
              </div>
            </div>
          </div>

          <div class="row no-gutters">
            <div class="col-md-7">
              <div class="contact-wrap w-100 p-md-5 p-4">

                <!--Alaert to display form submit success message-->
                <div id="formSuccessMessage" class="alert alert-success alert-dismissible fade show d-none" role="alert">
                  <span><i class="fa-solid fa-circle-check"></i> <span id="SuccessMessage"></span></span>
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                <!--Alaert to display form submit error message-->
                <div id="formErrorMessage" class="alert alert-danger alert-dismissible fade show d-none" role="alert">
                  <span><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> <span id="ErrorMessage"></span></span>
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>

                <!--headings-->
                <h3 class="mb-4">Contact Us</h3>

                <!--Contact Form start-->
                <form method="POST" action="/contact/submitContactForm" id="contactForm" name="contactForm" class="contactForm">
                  {% csrf_token %}
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <!--full name-->
                        <label class="label" for="name">Full Name</label>
                        <input type="text" class="form-control" name="contact_name" id="contact_name" placeholder="Name" required />
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="form-group">
                        <!--Emailaddress-->
                        <label class="label" for="email">Email Address</label>
                        <input type="email" class="form-control" name="contact_email" id="contact_email" placeholder="Email" required />
                      </div>
                    </div>

                    <div class="col-md-12">
                      <div class="form-group">
                        <!--subject-->
                        <label class="label" for="subject">Subject</label>
                        <input type="text" class="form-control" name="contact_subject" id="contact_subject" placeholder="Subject" required />
                      </div>
                    </div>

                    <div class="col-md-12">
                      <div class="form-group">
                        <!--message-->
                        <label class="label" for="#">Message</label>
                        <textarea class="form-control" name="contact_message" id="contact_message" cols="30" rows="4" placeholder="Message" required></textarea>
                      </div>
                    </div>

                    <div class="col-md-12">
                      <div class="form-group">
                        <!--Submit button-->
                        <input type="submit" value="Send Message" id="submit" class="btn btn-primary" />
                        <div class="submitting"></div>
                      </div>
                    </div>
                  </div>
                </form>
                <!--End contact form-->
              </div>
            </div>
            <div class="col-md-5 order-md-first d-flex align-items-stretch">
              <div>
                <img class="img-fluid h-100" src="{% static 'storeTemplate/images/contact_form_side_image.jpg' %}" alt="This is contact form image." />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock body %}

<!--Block to add javascript file links-->
{% block javascript_link %}
  <script src="{% static 'storeTemplate/js/jquery.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/jquery-migrate-3.0.1.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/popper.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/bootstrap.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/jquery.easing.1.3.js' %}"></script>
  <script src="{% static 'storeTemplate/js/jquery.waypoints.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/jquery.stellar.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/owl.carousel.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/jquery.magnific-popup.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/jquery.animateNumber.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/scrollax.min.js' %}"></script>
  <script src="{% static 'storeTemplate/js/main.js' %}"></script>
{% endblock javascript_link %}

<!--Block to add internal javascript-->
{% block javascript %}
<script>
  $("#contactForm").submit(function (e) {
    e.preventDefault(); // avoid to execute the actual submit of the form.

    var form = $(this);
    var actionUrl = form.attr("action");

    $.ajax({
      type: "POST",
      url: actionUrl,
      data: form.serialize(), // serializes the form's elements.
      success: function (response) {
        if(response['success'] == 'true')
        {
          $("#SuccessMessage").html(response['message']) // set message content into the div
          $("#formSuccessMessage").addClass('d-flex') // make success message display div visible
          $("#formErrorMessage").addClass('d-none') // make error message display div hidden
          
          // display window to the success message
          document.getElementById('formSuccessMessage').scrollIntoView({block:"center", behavior: 'smooth' })

          // Clearing the form
          $("#contactForm").trigger("reset")
        }
        else
        {
          $("#ErrorMessage").html(response['message']) // set message content into the div
          $("#formSuccessMessage").addClass('d-none') // make success message display div hidden
          $("#formErrorMessage").addClass('d-flex') // make success message display div hidden

          // Scrolling window to the error message
          document.getElementById('formErrorMessage').scrollIntoView({block:"center", behavior: 'smooth' })
        }
      },
      error: function(response){
        alert(response.status); // the status code
        alert(response.responseJSON.error); // the message
     },
    });
  });
</script>
{% endblock javascript %}
